{% extends 'base.html' %}
{% block content %}
<div class="container row mx-auto">
<h1 class="display-5 lh-1 fw-bold text-body-emphasis mb-3">Панель администратора</h1>
<div class="d-flex flex-column flex-md-row p-4 gap-4 py-md-5 align-items-center justify-content-center col-md-6 col-sm-12">
    <div class="list-group" style="min-width: 350px; max-height: 300px; overflow: scroll;">
      <a href="#" class="list-group-item bg-primary list-group-item-action d-flex gap-3 py-3" aria-current="true">
        <div class="d-flex gap-2 w-100 justify-content-between">
          <div>
            <h6 class="mb-0 fw-bold text-white">Добавить парковку</h6>
          </div>
        </div>
      </a>
      <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
        <div class="d-flex gap-2 w-100 justify-content-between">
          <div>
            <h6 class="mb-0">ул. Адольфа Гитлера 33</h6>
            <p class="mb-0 opacity-75">14881984</p>
          </div>
          <small class="opacity-50 text-nowrap">317</small>
        </div>
      </a>
      <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
        <div class="d-flex gap-2 w-100 justify-content-between">
          <div>
            <h6 class="mb-0">ул. 1984 года</h6>
            <p class="mb-0 opacity-75">09098756</p>
          </div>
          <small class="opacity-50 text-nowrap">105</small>
        </div>
      </a>
      <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
        <div class="d-flex gap-2 w-100 justify-content-between">
          <div>
            <h6 class="mb-0">Площадь Рейха</h6>
            <p class="mb-0 opacity-75">23454356</p>
          </div>
          <small class="opacity-50 text-nowrap">89</small>
        </div>
      </a>
      <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
        <div class="d-flex gap-2 w-100 justify-content-between">
          <div>
            <h6 class="mb-0">ул. Адольфа Гитлера 33</h6>
            <p class="mb-0 opacity-75">14881984</p>
          </div>
          <small class="opacity-50 text-nowrap">317</small>
        </div>
      </a>
      <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
        <div class="d-flex gap-2 w-100 justify-content-between">
          <div>
            <h6 class="mb-0">ул. 1984 года</h6>
            <p class="mb-0 opacity-75">09098756</p>
          </div>
          <small class="opacity-50 text-nowrap">105</small>
        </div>
      </a>
      <a href="#" class="list-group-item list-group-item-action d-flex gap-3 py-3" aria-current="true">
        <div class="d-flex gap-2 w-100 justify-content-between">
          <div>
            <h6 class="mb-0">Площадь Рейха</h6>
            <p class="mb-0 opacity-75">23454356</p>
          </div>
          <small class="opacity-50 text-nowrap">89</small>
        </div>
      </a>
    </div>
</div>
<div class="col-md-6 col-sm-12">
<div class="modal modal-sheet position-static d-block p-4 py-md-5" tabindex="-1" role="dialog" id="modalSheet">
  <div class="modal-dialog" role="document">
    <div class="modal-content rounded-4 shadow">
      <div class="modal-header border-bottom-0">
        <h1 class="modal-title fs-5">Добавить пользователя</h1>
      </div>
      <div class="modal-body py-0">
        <p>Добавляйте пользователей в ЛГБТ сообщество</p>
      </div>
      <div class="modal-footer flex-column align-items-stretch w-100 gap-2 pb-3 border-top-0">
        <button type="button" class="btn btn-lg btn-primary">Админимстратор</button>
        <button type="button" class="btn btn-lg btn-secondary" data-bs-dismiss="modal">Купонщик</button>
      </div>
    </div>
  </div>
</div>
</div>
</div>
<div class="container">
  <div class="row">
    <h1 class="display-7 lh-1 col-6 text-body-emphasis mb-3">Наполняемость</h1>
    <form method="post" class="col-6">
      {% csrf_token %}
      <div class="input-group mb-3">
        <input type="date" class="form-control" value="{{ start }}" name="period_start">
      <input type="date" class="form-control" value="{{ end }}" name="period_end">
      <button type="submit" class="btn btn-primary">Получить данные</button>
      </div>
      
    </form>
  </div>
  
  
  <div style="overflow: scroll;">
  <table class="table">
      <thead>
        <tr>
          <th scope="col">Парковка</th>
          <th scope="col">Количество ТС воспользовавшихся парковой за период</th>
          <th scope="col">Количество ТС воспользовавшихся бесплатным периодом (до 15 минут)</th>
          <th scope="col">Суммарный период пребывания ТС на парковке, мин.</th>
          <th scope="col">Средняя продолжительность парковочной сессии, мин.</th>
          <th scope="col">Минимальное время парковки, мин.</th>
          <th scope="col">Максимальное время парковки</th>
          <th scope="col">Количество льготников</th>
          <th scope="col">Среднее время парковки льготников, мин.</th>
          <th scope="col">Максимальное время парковки льготников</th>
        </tr>
      </thead>
      <tbody>
        {% for park in parkings %}
        <tr>
          <th scope="row">{{ park.address }}</th>
          <td>{{ park.how_much_people_used }}</td>
          <td>{{ park.people_used_free_time }}</td>
          <td>{{ park.total_time }}</td>
          <td>{{ park.session_avarage_duration }}</td>
          <td>{{ park.min_session }}</td>
          <td>{{ park.max_session }}</td>
          <td>{{ park.with_benefits }}</td>
          <td>{{ park.benefits_session_avarage_duration }}</td>
          <td>{{ park.max_benefit_session }}</td>
        </tr>
        {% endfor %}
      </tbody>
  </table>
  </div>
  <hr>
  <h1 class="display-7 lh-1 text-body-emphasis mb-3">Финансовый отчет</h1>
  <div style="overflow: scroll;">
    <table class="table">
        <thead>
          <tr>
            <th scope="col">Парковка</th>
            <th scope="col">Транзакций на сумму</th>
            <th scope="col">Количество транзакций</th>
            <th scope="col">Количество льготных транзакций</th>
            <th scope="col">Льготных транзацкий на сумму</th>
          </tr>
        </thead>
        <tbody>
          {% for el in fins %}
          <tr>
            <th scope="row">{{ el.address }}</th>
            <td>{{ el.total_price }}</td>
            <td>{{ el.how_much_people_used }}</td>
            <td>@{{ el.with_benefits }}</td>
            <td>@{{ el.benefits_price }}</td>
          </tr>
          {% endfor %}
        </tbody>
    </table>
  </div>
  <hr>
  <div id="map" style="width:500px; height:400px"></div>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.3.2/dist/chart.umd.js" integrity="sha384-eI7PSr3L1XLISH8JdDII5YN/njoSsxfbrkCTnJrzXt+ENP5MOVBxD+l6sEG4zoLp" crossorigin="anonymous"></script>
{% endblock %}
